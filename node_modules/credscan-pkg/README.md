# CredScan npm package

This is a npm package based on [CredScan-SDK](https://msazure.visualstudio.com/One/_git/SecEng-CredScan-SDK?version=GBdev) to scan for credentials in logs.

### Dependencies
* Edge.js
* @actions/core

To install these dependencies, please run the following command:
`npm install`

To include this package in your project, add `var cs = require('credscan-pkg)`.

### The function credscan
This function scans the input string and checks if it contains credentials. If it finds credentials, it redacts them. This feature can be disabled by appending a '0' to the string. It also raises a warning when it finds credentials.
#### Example

Suppose we have:
`var inputString = 'Mongo Connection string mongodb://mongodb-example:erSNrY3Ucc3Q1v3JzDbfvRDiwj7n082WikBhX6C0VZa8lddDrqQN2yYiHpNoXhFLcsrOtmsK5bcVPriIWIt8KQ==@example-example.documents.azure.com:10255/store?ssl=true&sslverifycertificate=false&replicaSet=globaldb&connectTimeoutMS=300000&socketTimeoutMS=300000&retryWrites=true'`

`var outputString = cs.credscan(inputString);`

`outputString` will contain `Mongo Connection string mongodb://mongodb-example:REDACTED_CREDENTIALS@example-example.documents.azure.com:10255/store?ssl=true&sslverifycertificate=false&replicaSet=globaldb&connectTimeoutMS=300000&socketTimeoutMS=300000&retryWrites=true`

If you want to disable string modification, you can do this instead:

`var outputString = cs.credscan(inputString+0);`

In this case, only a warning `::warning::Credentials were found.` is raised but the string is not modified.

### The function credscan_no_warning
This function is the same as `credscan` except that a warning will not be raised if credentials were found in the input string.
